ros2 pkg create simple_py_pkg --build-type ament_python --dependencies rclpy --komutuyla python paketi oluşturuyruz.

bazı bildirimlerin yeri geldiğinde yapılmaası için gereken dosyalar ve paket hakkında bilgiler içerir -> setup.py ve package.xml dosyası
pip3 list | grep setuptools -> 59.6.0 sürümünde 

NODE
her bir node bir görevden sorumludur. 
nodelar aynı paketteki ve diğer paketteki nodelarla da haberleşebilir -> düğümler tekerlek motorlarını kontrol edebilir veya lidardan gelen verileri işleyip diğer düğümlerle bu bilgileri paylaşabilir.

Düğüm nasıl yazılır: (elimizden geldiğince nesne yönelimli olarak yazacaz)

setup.py değiştiği zaman tekrar build edilir.

düğüm oluştururken nesne tabanlı classlarla oluşturuyoruz.

colcon build --packages-select simple_py_pkg    --> seçili olan paketi build eder (bu ksımda hata almıştım ama;
source install/setup.bash yaptıktan sonra düzeldi ama bu çözüm kesin değil her seferinde yazılması gerekiyor o yüzden ;
echo "source ~/ARTEK/ROS2/ros2_ws/install/setup.bash" >> ~/.bashrc bunu yazdıktan sonra source ~/.bashrc diyoruz.)

colcon build --packages-select simple_py_pkg --symlink-install  --bunun diğer build den farkı kodda değişiklik olduğunda sürekli build etmemizi engeller

ros2 node list -> bize çalışan nodeları gösterir
ros2 node info /counter_node  --bize node hakkında bilgi veriyor. (bunun çalışmasi icin node unda çalışması lazım)

ros2 run simple_py_pkg counter_node --ros-args --remap __node:=abc --bu kod sayesinde ise aynı görevi yapacak node un ismini değiştirerek hata almamızı engelleriz

RQT ile Düğüm Analizi : 

rqt yazarak açtığımız guı ekranında düğümleri görebiliyoruz.

Turtlesim ile Düğüm(node) analizi 
ilk once indiriyoruz -> sudo apt install ros-humble-turtlesim
sonra ros2 run turtlesim diyerek çalıştıyoruz
başka bir terminalde ise ros2 turtlesim turtle_teleop_key komutunu çalıştırarak kalvyeden basılan tuşlara göre hareket etmesini sağlıyoruz


2. Konular (Topic)

Bir nodedan diğer node'a haberleşmek için topicler kullanılır.
publisher: node yazılımı ilk olarak topic üzerinden yayınlıyoruz 
subscriber: bunlarda publishere abone olup o yayınlanan bilgilere sahip oluyorlar

burda publisherın nasıl yayınlandığını ve topiciğin nasıl dinlendiğii gördük



ros2 run simple_py_pkg channel_node ile yayınladıktan sonra 
ros2 topic echo /channel_something komutu ile de topiciğimi dinleyebiliyoruz.

şimdi ise abone düğümü yazıp bir publishera yani bir yayıncıya abone olup onu dinlicez

turtlesim ile konu analizi yapıyoruz
ros2 interface show geometry_msgs/msg/Twist
ros2 interface show geometry_msgs/msg/Vector3


Servisler : 


request ve response olayları var. Publisher ve subscriberden farkı biz sadece bilgiyi istediğimiz zaman çağırırız gibi

Şimdi service düğümü yazımına geçelim

umut@umut:~/ARTEK/ROS2/turtlesim_ws$ ros2 interface show example_interfaces/srv/AddTwoInts 
int64 a
int64 b
---
int64 sum

burda 3 cizginin üstündekiler request altındakiler response gösterir.

ros2 service call /add_two_ints example_interfaces/srv/AddTwoInts "{a : 4, b : 8}"  --bunla servisi başlatıyoruz 
burdaki : noktalardan sonra ve virgülden sonra bosluk birakilmasi gerekiyor yoksa hata veriyor

ros2 run simple_py_pkg add_two_ints_server_node --ros-args -r add_two_ints:=new_server komutu ile servisi yeniden adlandırabiliriz.

ros2 service call /spawn turtlesim/srv/Spawn "{x : 5, y : 9, theta : 45, name : new_turtle_2"} --yeni bir turtle spawn edebiliriz

ros2 service call /kill turtlesim/srv/Kill "{name : new_turtle}" ---olan bir turtle ı siler

